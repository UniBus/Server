<!-- Provided by MyFreeTemplates.com -->

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>UniBus</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="keywords" content="Keywords here">
<meta name="description" content="Description here">
<meta name="Author" content="MyFreeTemplates.com">
<META NAME="robots" CONTENT="index, follow">
<!-- (Robot commands: All, None, Index, No Index, Follow, No Follow) -->
<META NAME="revisit-after" CONTENT="30 days">
<META NAME="distribution" CONTENT="global">
<META NAME="rating" CONTENT="general">
<META NAME="Content-Language" CONTENT="english">
<link href="../images/myfreetemplates.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
-->
</style>
</head>

<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
  <tr> 
    <td height="61" background="../images/topbg.gif"><img src="../images/toplogo.gif" width="186" height="61"></td>
    <td height="61" align="right" background="../images/topbg.gif"><img src="../images/toppic.gif" width="278" height="61"></td>
  </tr>
  <tr> 
    <td width="186" valign="top" background="../images/bg1.gif"><img src="../images/bg1.gif" width="186" height="10"> 
      <table width="100%" border="0" cellpadding="0" cellspacing="0" background="../images/sidenavbg.gif">
        <tr> 
          <td><a href="../index.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>Home</td></tr>
              </table>
              </a>
            <img src="../images/pixi_clear.gif" width="1" height="3">
          </td>
        </tr>

        <tr> 
          <td><a href="./index.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>Development Home</td></tr>
              </table>
              </a>
            <img src="../images/pixi_clear.gif" width="1" height="3">
          </td>
        </tr>

        <tr> 
          <td><a href="./cities.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>Cities</td></tr>
              </table>
              </a>
            <img src="../images/pixi_clear.gif" width="1" height="3">
          </td>
        </tr>

        <tr> 
          <td><a href="./random.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>Random Tests</td></tr>
              </table>
              </a>
            <img src="../images/pixi_clear.gif" width="1" height="3">
          </td>
        </tr>

        <tr> 
          <td><a href="./documents.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>Documents</td></tr>
              </table>
              </a>
            <img src="../images/pixi_clear.gif" width="1" height="3">
          </td>
        </tr>

        <tr> 
          <td><a href="./logs.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>Logs</td></tr>
              </table>
              </a>
            <img src="../images/pixi_clear.gif" width="1" height="3">
          </td>
        </tr>

        <tr> 
          <td><a href="./todo.html">
              <table width="183" height="26"  cellpadding="0" cellspacing="0" background="../images/btn.gif">
                  <tr><td width="25"></td><td>To-Do List</td></tr>
              </table>
              </a>
          </td>
        </tr>


      </table> <br> <br> <table width="183" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td colspan="2" background="../images/btn.gif" width="183" height="26" align="center">Reminder</td>
        </tr>
        <tr> 
          <td width="24" background="../images/newsbg.gif"><p>&nbsp;</p>
            <p>&nbsp;</p></td>
          <td width="159" valign="top" background="../images/newsbg.gif"><span class="sidelinks"><br>
            <strong> Need more work here!<br>
            </strong><br>
            More to come..<br></span>
            <br> </td>
        </tr>
        <tr> 
          <td height="1" colspan="2" background="../images/bg4.gif"><img src="../images/bg4.gif" width="1" height="1"></td>
        </tr>
      </table>
      <br> </td>
    <td valign="top" background="../images/bg3.gif">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td width="5%" rowspan="4">&nbsp;</td>
          <td width="80%">&nbsp;</td>
          <td width="15%" rowspan="4">&nbsp;</td>
        </tr>
        <tr> 
          <td align="left"> <h1>Setup of the system</h1></td>
        </tr>
        <tr> 
          <td align="left">
             <h2>Installation software</h2>
		<P CLASS="indented">
		<TABLE BORDER=1 CELLPADDING=7 CELLSPACING=0>
			<TR VALIGN=CENTER>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>Software</B></FONT></P>
				</TD>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>Ver</B></FONT></P>
				</TD>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>Installation Notes</B></FONT></P>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Apache</P>
				</TD>
				<TD>
					<P>2.2.10</P>
				</TD>
				<TD>
					<P>After installation, change configuration file</P>
					<UL>
						<LI>DocumentRoot xxx</LI>
						<LI>&lt;Directory xxx&gt;</LI>
					</UL>
					<P>Test	with http://localhost/</P>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>PHP</P>
				</TD>
				<TD>
					<P>5.2.6</P>
				</TD>
				<TD>
					<P>Two package to install: installer, and zip package</P>
					<UL>
						<LI>Change php.ini-recommended to php.ini, and</LI>
						<LI>Change "doc_root"</LI>
						<LI>Change "extension_dir"</LI>
						<LI>Uncomment "extension=php_mysql.dll"</LI>
					</UL>
					<P>Test with a php file, say info.php in place.</P>
					<P>&lt;?php phpinfo(); ?&gt;</P>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>MySQL</P>
				</TD>
				<TD>
					<P>5.0.67</P>
				</TD>
				<TD>
					<P>After installation:</P>
					<UL>
						<LI>Copy libMySQL.dll into php directory.</LI>
					</UL>
				</TD>
			</TR>
		</TABLE>
		</P><BR>


             <h2>Import Database</h2>
		<P CLASS="indented">Some cities have
		either special format of gtfs files, or some special arrangement of
		the data. The following is a summary.</P>

		<P CLASS="indented">
		<TABLE BORDER=1 CELLPADDING=7 CELLSPACING=0>
			<TR VALIGN=CENTER>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>City</B></FONT></P>
				</TD>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>Installation Notes</B></FONT></P>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					Portland<BR>
					Milwaukee
				</TD>
				<TD>
					<UL>
						<LI>Its stops.txt file has extra columns of "position" and "direction".</LI>
						<LI>Doesn't have calendar file.</LI>
						<LI>For queries to be successful, I used to create a fake record in
						calendar table, but after Ver1.2, querying scheme has been
						improved, and such manual change is not needed any more.</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Denver</P>
				</TD>
				<TD>
					<UL>
						<LI>Its calendar.txt and calendar_date have redundant information.</LI>
						<LI>For queries to be successful, I used to delete records in calendar
						table, and create a fake record in the table. But after Ver1.2,
						querying scheme has been improved, and such manual change is
						not needed any more.</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Some cities (Special cases)</P>
				</TD>
				<TD>
					<UL>
						<LI>There are quotation marks embracing the values.</LI>
						<LI>There are cities missing one field or another.</LI>
						<LI>There are some leading or ending whitespace.</LI>
						<LI>For XML, &amp; signs need to be replaced with &amp;amp; , but not for sqlite3 databases.</LI>
						<LI>A bus time may go beyond 23:59:59, for example, it can be 27:00:00.</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Toronto</P>
				</TD>
				<TD>
					<UL>
						<LI>Route short name of subway should be change to YUS for better display.</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Honolulu</P>
				</TD>
				<TD>
					<UL>
						<LI>Stops.txt need manual fix to avoid duplicated records.</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Caltrain</P>
				</TD>
				<TD>
					<UL>
						<LI>Stops.txt need manual fix to avoid whitespace in stop_id</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					<P>Metrolink</P>
				</TD>
				<TD>
					<UL>
						<LI>Routes.txt/trips.txt need manual fix to avoid whitespace in route_id</LI>
					</UL>
				</TD>
			</TR>
			<TR VALIGN=CENTER>
				<TD>
					OC<BR>
					Humboldt<BR>
					Perth<BR>
					San Francisco<BR>
				</TD>
				<TD>
					<UL>
						<LI>These cities do not have valid direction_id information, either there
						is no such a field in the trips.txt file, or the field is kept blank.</LI>
					</UL>
				</TD>
			</TR>
		</TABLE>
		</P><BR>


             <h2>Add a New City</h2>
		<P CLASS="indented">
		<TABLE BORDER=1 CELLPADDING=7 CELLSPACING=0>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>Steps</B></FONT></P>
				</TD>
				<TD>
					<P ALIGN=CENTER><FONT COLOR="#ffffff"><B>Notes</B></FONT></P>
				</TD>
			</TR>
			<TR>
				<TD>
					<P>Create database</P>
					<P>bus_&lt;city&gt;</P>
				</TD>
				<TD VALIGN=CENTER>
					<UL>
						<LI>Directory: transit_data/</LI>
						<UL>
							<LI>Create &lt;city&gt; directory, and copy GTFS data.</LI>
							<LI>create import_&lt;city&gt;.bat by copying and modifying</LI>
						</UL>
					</UL>
				</TD>
			</TR>
			<TR>
				<TD>
					<P>Add web service</P>
				</TD>
				<TD VALIGN=CENTER>
					<UL>
						<LI>Directory: public_html/ver1.1/&lt;city&gt;</LI>
						<UL>
							<LI>Copy info.php/arrivals.php/schedules.php</LI>
							<LI>Modify info.php. (timeZone/dbName/cityName/agencyName)</LI>
						</UL>
					</UL>
				</TD>
			</TR>
			<TR>
				<TD>
					<P>Test XML</P>
				</TD>
				<TD VALIGN=CENTER>
					<UL>
						<LI>FireFox</LI>
						<UL>
							<LI>Check some arrivals/schedules</LI>
						</UL>
						<LI>Make sure calendar table do or do not need adjustment</LI>
					</UL>
				</TD>
			</TR>
			<TR>
				<TD>
					<P>Create mobile datbase</P>
					<P>&lt;city&gt;.sqlite</P>
				</TD>
				<TD VALIGN=CENTER>
					<UL>
						<LI>Directory: transit_data/~mobile</LI>
						<UL>
							<LI>add&lt;city&gt;.bat.</LI>
							<LI>update supportedcities.lst</LI>
							<LI>addgtfs_info.bat</LI>
						</UL>
					</UL>
				</TD>
			</TR>
			<TR>
				<TD>
					<P>Prepare for update</P>
				</TD>
				<TD VALIGN=CENTER>
					<UL>
						<LI>Directory: transit_data/~code</LI>
						<UL>
							<LI>Modify supportedcities.lst</LI>
						</UL>
						<LI>Directory: transit_data/</LI>
						<UL>
							<LI>update_gtfs_info.bat</LI>
						</UL>
						<LI>Directory: public_html/ver1.1/updates</LI>
						<UL>
							<LI>Copy &lt;city&gt;.sqlite</LI>
						</UL>
					</UL>
				</TD>
			</TR>
			<TR>
				<TD>
					<P>Prepare for offline browsing.</P>
				</TD>
				<TD VALIGN=CENTER>
					<UL>
						<LI>Directory: transit_data/~mobile</LI>
						<UL>
							<LI>cache&lt;city&gt;.bat</LI>
						</UL>
					</UL>
				</TD>
			</TR>
		</TABLE>
		</P><BR>



            <p>&nbsp;</p></td>
        </tr>
      </table>
    </td>
  </tr>
  <tr valign="middle"> 
    <td height="36" colspan="2" background="../images/basebg.gif">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><font size="1">&nbsp;&nbsp;&nbsp;&copy; Copyright
          2009. Zhenwang Yao</font></td>
        <td align="right"> <a href="http://www.interspire.com/templates" target="_blank"><font size="1" face="Arial, Helvetica, sans-serif"  color="#FFFFFF">Design by Interspire</font></a>&nbsp;&nbsp; </td>
      </tr>
    </table>
    </td>
  </tr>
</table>
</body>
</html>
